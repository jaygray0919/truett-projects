<!--
source:
https://codepen.io/maenrique/pen/wvWjNYr
-->
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1">
<!-- <meta name="viewport" content="width=device-width"> -->
<link rel="shortcut icon" href="https://ontomatica.io/static/image/logo/onto-symbol-w252-h252.svg"/>
<title>
Story Player test
</title>
<script async src="https://cdn.ampproject.org/amp-story-player-v0.js" onload="initializePlayer()"></script>
<link href="https://cdn.ampproject.org/amp-story-player-v0.css" rel="stylesheet" type="text/css">

<style>

amp-story-player {
    width: 100%;
    height: 100%;
}

.entry-points {
    position: relative;
    top: 100px;
    display: flex;
}

.entry-points img {
    cursor: pointer;
    width: 80px;
    height: 80px;
    border-radius: 100%;
    background-clip: content-box;
    border: 2px solid;
    padding: 3px;
    position: relative;
    left: 50%;
    transform: translate3d(-50%, 0, 0);
    margin: 5px 0px;
}

.entry-point-card-container {
    margin-top: 30px;
}

.entry-point-card-container:before {
    white-space: pre;
    word-wrap: break-word;
}

.entry-point-card-title {
    font-weight: 500;
    font-family: Poppins;
    font-size: 11px;
    line-height: 15px;
    text-align: center;
    display: inline-block;
    color: #fff;
}

body {
    background-color: #202029;
    display: flex;
    justify-content: space-around;
}

.column {
    top: 100px;
}

.website-rectangle {
    background-color: #24242d;
    width: 360px;
    height: 600px;
    border-radius: 16px;
}

h3 {
    font-weight: 600;
    font-size: 18px;
    line-height: 27px;
    color: white;
    font-family: Poppins;
}

</style>
</head>

<body>

<div class="column">
  <h3>Your website</h3>
  <div class="website-rectangle">
    <div class="entry-points">
      <div class="entry-point-card-container">
        <img src="https://assets.codepen.io/1780597/4.png" class="entry-point-card-img" style="border-color:#FF6F32">
        <span class="entry-point-card-title">
        Q&A with ZOE Newman
        </span>
        <span class="entry-point-card-title">
        Lorem ipsum
        </span>
      </div>
      <div class="entry-point-card-container">
        <img src="https://assets.codepen.io/1780597/1.png" class="entry-point-card-img" style="border-color:#E6AD1C">
        <span class="entry-point-card-title">
        24 Hours in New York City
        </span>
        <span class="entry-point-card-title">
        Lorem ipsum
        </span>
      </div>
      <div class="entry-point-card-container">
        <img src="https://assets.codepen.io/1780597/3.png" class="entry-point-card-img" style="border-color:#466FFF">
        <span class="entry-point-card-title">
        The Next King of the Sea
        </span>
        <span class="entry-point-card-title">
        Lorem ipsum
        </span>
      </div>
    </div>
  </div>
</div>

<div class="column">
  <h3>Your player</h3>
  <div class="website-rectangle">
    <amp-story-player>
      <a href="https://wsdemos.uc.r.appspot.com/ampfest/s1"></a>
      <a href="https://wsdemos.uc.r.appspot.com/ampfest/s2"></a>
      <a href="https://wsdemos.uc.r.appspot.com/ampfest/s3"></a>
    </amp-story-player>
  </div>
</div>

<script>

const player = document.body.querySelector("amp-story-player");

player.addEventListener("ready", () => {
  initializeClickListeners();
});

if (player.isReady) {
  initializeClickListeners();
}

function initializeClickListeners() {
  const entryPoint = document.querySelector(".entry-points");
  const stories = player.getStories();

  entryPoint.addEventListener("click", (event) => {
    let card = event.target.closest(".entry-point-card-container");

    if (!card) return;

    let idx = 0;
    while ((card = card.previousElementSibling) != null) {
      idx++;
    }

    player.show(stories[idx].href);
  });
}
</script>

</body>
</html>
