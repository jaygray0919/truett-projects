<!--
source
https://codepen.io/mszylkowski/pen/dyOLKgE
-->
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>
AMP Story Player for SDL
</title>
<link rel="canonical"           href="https://ontomatica.io/canonical.html"/>
<link rel="icon"                href="https://ontomatica.io/static/image/logo/onto-symbol-w252-h252.svg" />

<!-- <script async src="https://cdn.ampproject.org/amp-story-player-v0.js"></script> -->
<!-- <link href="https://cdn.ampproject.org/amp-story-player-v0.css" rel='stylesheet' type='text/css'> -->

<script
    async
    src="https://cdn.ampproject.org/amp-story-player-v0.js"
    onload="initializePlayer()"
></script>
<link
    href="https://cdn.ampproject.org/amp-story-player-v0.css"
    rel="stylesheet"
    type="text/css"
/>


<style>
body {
  background: darkgray;
}

amp-story-player {
  position: absolute !important;
  top: 24px;
  left: 24px;
  right: 24px;
  bottom: 24px;
  margin: 0;
  padding: 0;
  box-shadow: 0px 5px 10px #00000066;
}

my-custom-sidebar {
  opacity: 0;
  position: absolute;
  pointer-events: none;
  left: 24px;
  right: 24px;
  top: 24px;
  bottom: 24px;
  background: rgba(0, 0, 0, 0.4);
  color: #fff;
  transition: opacity 0.2s ease-in-out;
  overflow: hidden;
}

my-custom-sidebar.show {
  opacity: 1;
  pointer-events: inherit;
}

my-custom-sidebar .sidebar {
  background: #25303f;
  position: absolute;
  left: 0px;
  width: 40vh;
  top: 0px;
  height: 100%;
  transform: translateX(-100%);
  transition: transform 0.2s ease-in-out;
  max-width: 100%;
}

my-custom-sidebar.show .sidebar {
  transform: translateX(0);
}

my-custom-sidebar .empty-space {
  left: calc(40vh + 24px);
  right: 0;
  top: 0;
  height: 100%;
}

button.close {
  width: 32px;
  height: 32px;
  background: url('data:image/svg+xml;utf8,<svg style="width:24px;height:24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="white" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>');
  border: none;
  position: absolute;
  right: 10px;
  top: 10px;
  cursor: pointer;
}

h1 {
  margin: 0px;
  padding: 20px 10px;
  font-family: sans-serif;
}

p {
  font-family: sans-serif;
  margin: 0;
  padding: 5px 10px;
}

</style>
</head>

<body>
<amp-story-player>
    <script type="application/json">
   {
     "controls": [
       {
         "name": "sidebar",
         "position": "end",
         "backgroundImageUrl": "data:image\/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"width:24px;height:24px\" viewBox=\"0 0 24 24\"><path fill=\"white\" d=\"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z\"\/></svg>"
       }
     ]
   }
</script>

<a href="https://afdsi.com/story-sdl/"></a>

</amp-story-player>

<my-custom-sidebar class="show">

<div class="sidebar">
<h1>Sidebar</h1>
<p>You can implement your own sidebar inside your website with the amp-story-player custom controls.</p>
<p>Check the Codepen source-code to understand how to listen for clicks on custom controls and trigger the sidebar with it.</p>
<p>This sidebar is completely customizable, as it lives inside your page and is not embedded in the story.</p>
<button class="close"></button>
<div>
<ul>
<li>
<!-- <button onclick="show15()">Page 5</button> -->
<a style="color:white;" href="#" onclick="show15()">Page 5</a>
</li>
<li>
<!-- <button onclick="show26()">Page 16</button> -->
<a style="color:white;" href="#" onclick="show26()">Page 16</a>
</li>
</ul>
</div>
<div class="close empty-space"></div>
</div>

</my-custom-sidebar>

<script>
const playerEl = document.querySelector('amp-story-player');
const sidebarEl = document.querySelector('my-custom-sidebar');
const closeSidebarEls = document.querySelectorAll('my-custom-sidebar .close');

playerEl.addEventListener("amp-story-player-sidebar", () => {
	sidebarEl.classList.add("show");
});

closeSidebarEls.forEach((closeSidebarEl) => {
	closeSidebarEl.addEventListener("click", () => {
		sidebarEl.classList.remove('show');
	});
});
</script>
<script>
let player;

function events() {

	player.addEventListener("storyEnd", (data) =>
		console.log("storyEnd", data)
	);

	player.addEventListener("amp-story-player-close", () => {
		console.log("Close button clicked");
	});
}

function initializePlayer() {
	player = window.document.querySelector("amp-story-player");
	if (player.isReady) {
		console.log("isready");
		events();
		return;
	}

	player.addEventListener("ready", () => {
		console.log("ready");
		events();
	});
}

function show15(story) {
	player.show(null, 'item-15');
}

function show26(story) {
	player.show(null, 'item-26');
}
</script>

</body>
</html>
